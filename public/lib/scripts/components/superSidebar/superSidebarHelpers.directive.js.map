{"version":3,"sources":["components/superSidebar/superSidebarHelpers.directive.js"],"names":["angular","module","directive","superSidebarToggleMenu","baSidebarToggleMenu","baSidebarCollapseMenu","baSidebarTogglingItem","controller","BaSidebarTogglingItemCtrl","baUiSrefTogglingSubmenu","baUiSrefToggler","superSidebarService","restrict","link","scope","elem","on","$evt","originalEvent","$sidebarEventProcessed","$apply","toggleMenuCollapsed","isMenuCollapsed","setMenuCollapsed","$scope","$element","$attrs","vm","menuItem","$$menuItem","$eval","subMenu","length","$$expandSubmenu","console","warn","$$collapseSubmenu","subItemsStateRefs","getAllStateRefsRecursive","$expand","addClass","$collapse","removeClass","$toggle","hasClass","isCurrent","$on","event","toState","_isState","state","some","subItemState","name","indexOf","require","el","attrs","slideDown","slideUp"],"mappings":";;AAAA;;;;AAIA,CAAC,YAAY;AACX;;AAEAA,UAAQC,MAAR,CAAe,cAAf,EACKC,SADL,CACe,wBADf,EACyCC,sBADzC,EAEKD,SAFL,CAEe,qBAFf,EAEsCE,mBAFtC,EAGKF,SAHL,CAGe,uBAHf,EAGwCG,qBAHxC,EAIKH,SAJL,CAIe,uBAJf,EAIwCI,qBAJxC,EAKKC,UALL,CAKgB,2BALhB,EAK6CC,yBAL7C,EAMKN,SANL,CAMe,yBANf,EAM0CO,uBAN1C,EAOKP,SAPL,CAOe,iBAPf,EAOkCQ,eAPlC;;AASC;AACA,WAASP,sBAAT,CAAgCQ,mBAAhC,EAAqD;AACjD,WAAO;AACLC,gBAAU,GADL;AAELC,YAAM,cAASC,KAAT,EAAgBC,IAAhB,EAAqB;AACxBA,aAAKC,EAAL,CAAQ,OAAR,EAAgB,UAASC,IAAT,EAAc;AAC5BA,eAAKC,aAAL,CAAmBC,sBAAnB,GAA4C,IAA5C;AACAL,gBAAMM,MAAN,CAAa,YAAW;AACtBT,gCAAoBU,mBAApB;AACD,WAFD;AAGD,SALD;AAMF;AATI,KAAP;AAWH;;AAEF;AACA,WAASjB,mBAAT,CAA6BO,mBAA7B,EAAkD;AAChD,WAAO;AACLC,gBAAU,GADL;AAELC,YAAM,cAASC,KAAT,EAAgBC,IAAhB,EAAsB;AAC1BA,aAAKC,EAAL,CAAQ,OAAR,EAAiB,UAASC,IAAT,EAAe;AAC9BA,eAAKC,aAAL,CAAmBC,sBAAnB,GAA4C,IAA5C;AACAL,gBAAMM,MAAN,CAAa,YAAW;AACtBT,gCAAoBU,mBAApB;AACD,WAFD;AAGD,SALD;AAMD;AATI,KAAP;AAWD;;AAED;AACA,WAAShB,qBAAT,CAA+BM,mBAA/B,EAAoD;AAClD,WAAO;AACLC,gBAAU,GADL;AAELC,YAAM,cAASC,KAAT,EAAgBC,IAAhB,EAAsB;AAC1BA,aAAKC,EAAL,CAAQ,OAAR,EAAiB,UAASC,IAAT,EAAe;AAC9BA,eAAKC,aAAL,CAAmBC,sBAAnB,GAA4C,IAA5C;AACA,cAAI,CAACR,oBAAoBW,eAApB,EAAL,EAA4C;AAC1CR,kBAAMM,MAAN,CAAa,YAAW;AACtBT,kCAAoBY,gBAApB,CAAqC,IAArC;AACD,aAFD;AAGD;AACF,SAPD;AAQD;AAXI,KAAP;AAaD;;AAED;AACA,WAASjB,qBAAT,GAAiC;AAC/B,WAAO;AACLM,gBAAU,GADL;AAELL,kBAAY;AAFP,KAAP;AAID;;AAED;AACA,WAASC,yBAAT,CAAmCgB,MAAnC,EAA2CC,QAA3C,EAAqDC,MAArD,EAA6Df,mBAA7D,EAAkF;AAChF,QAAIgB,KAAK,IAAT;AACA,QAAIC,WAAWD,GAAGE,UAAH,GAAgBL,OAAOM,KAAP,CAAaJ,OAAOpB,qBAApB,CAA/B;AACA,QAAIsB,YAAYA,SAASG,OAArB,IAAgCH,SAASG,OAAT,CAAiBC,MAArD,EAA6D;AAC3DL,SAAGM,eAAH,GAAqB,YAAW;AAAEC,gBAAQC,IAAR,CAAa,+DAAb;AAA+E,OAAjH;AACAR,SAAGS,iBAAH,GAAuB,YAAW;AAAEF,gBAAQC,IAAR,CAAa,oEAAb;AAAoF,OAAxH;;AAEA,UAAIE,oBAAoB1B,oBAAoB2B,wBAApB,CAA6CV,QAA7C,CAAxB;;AAEAD,SAAGY,OAAH,GAAa,YAAW;AACtBZ,WAAGM,eAAH;AACAR,iBAASe,QAAT,CAAkB,0BAAlB;AACD,OAHD;;AAKAb,SAAGc,SAAH,GAAe,YAAW;AACxBd,WAAGS,iBAAH;AACAX,iBAASiB,WAAT,CAAqB,0BAArB;AACD,OAHD;;AAKAf,SAAGgB,OAAH,GAAa,YAAW;AACtBlB,iBAASmB,QAAT,CAAkB,0BAAlB,IACIjB,GAAGc,SAAH,EADJ,GAEId,GAAGY,OAAH,EAFJ;AAGD,OAJD;;AAMA,UAAI5B,oBAAoBkC,SAAxB,EAAmC;AACjCpB,iBAASe,QAAT,CAAkB,0BAAlB;AACD;;AAEDhB,aAAOsB,GAAP,CAAW,mBAAX,EAAgC,UAAUC,KAAV,EAAiBC,OAAjB,EAA0B;AACxD,YAAIvB,SAASmB,QAAT,CAAkB,0BAAlB,CAAJ,EAAmD;AACjDjB,aAAGc,SAAH;AACAhB,mBAASiB,WAAT,CAAqB,0BAArB;AACD;AACF,OALD;;AAOAlB,aAAOsB,GAAP,CAAW,qBAAX,EAAkC,UAAUC,KAAV,EAAiBC,OAAjB,EAA0B;AAC1D,YAAK,CAACvB,SAASmB,QAAT,CAAkB,0BAAlB,CAAN,EAAqD;AACnDjB,aAAGY,OAAH;AACAd,mBAASe,QAAT,CAAkB,0BAAlB;AACD;AACF,OALD;AAMD;;AAED,aAASS,QAAT,CAAkBC,KAAlB,EAAyB;AACvB,aAAOA,SAASb,kBAAkBc,IAAlB,CAAuB,UAASC,YAAT,EAAuB;AACxD,eAAOF,MAAMG,IAAN,CAAWC,OAAX,CAAmBF,YAAnB,KAAoC,CAA3C;AACD,OAFW,CAAhB;AAGD;AACF;;AAED;AACA,WAAS3C,uBAAT,GAAmC;AACjC,WAAO;AACLG,gBAAU,GADL;AAEL2C,eAAS,wBAFJ;AAGL1C,YAAM,cAASC,KAAT,EAAgB0C,EAAhB,EAAoBC,KAApB,EAA2BnD,qBAA3B,EAAkD;AACtDA,8BAAsB2B,eAAtB,GAAwC,YAAW;AAAEuB,aAAGE,SAAH;AAAiB,SAAtE;AACApD,8BAAsB8B,iBAAtB,GAA0C,YAAW;AAAEoB,aAAGG,OAAH;AAAe,SAAtE;AACD;AANI,KAAP;AAQD;;AAED;AACA,WAASjD,eAAT,CAAyBC,mBAAzB,EAA8C;AAC5C,WAAO;AACLC,gBAAU,GADL;AAEL2C,eAAS,wBAFJ;AAGL1C,YAAM,cAASC,KAAT,EAAgB0C,EAAhB,EAAoBC,KAApB,EAA2BnD,qBAA3B,EAAkD;AACtDkD,WAAGxC,EAAH,CAAM,OAAN,EAAe,YAAW;AACxB,cAAIL,oBAAoBW,eAApB,EAAJ,EAA2C;AACzC;AACA;AACAR,kBAAMM,MAAN,CAAa,YAAW;AACtBT,kCAAoBY,gBAApB,CAAqC,KAArC;AACD,aAFD;AAGAjB,kCAAsBiC,OAAtB;AACD,WAPD,MAOO;AACLjC,kCAAsBqC,OAAtB;AACD;AACF,SAXD;AAYD;AAhBI,KAAP;AAkBD;AAEF,CAzJD","file":"superSidebarHelpers.directive.js","sourcesContent":["/**\r\n * @author v.lugovsky\r\n * created on 03.05.2016\r\n */\r\n(function () {\r\n  'use strict';\r\n\r\n  angular.module('superSidebar')\r\n      .directive('superSidebarToggleMenu', superSidebarToggleMenu)\r\n      .directive('baSidebarToggleMenu', baSidebarToggleMenu)\r\n      .directive('baSidebarCollapseMenu', baSidebarCollapseMenu)\r\n      .directive('baSidebarTogglingItem', baSidebarTogglingItem)\r\n      .controller('BaSidebarTogglingItemCtrl', BaSidebarTogglingItemCtrl)\r\n      .directive('baUiSrefTogglingSubmenu', baUiSrefTogglingSubmenu)\r\n      .directive('baUiSrefToggler', baUiSrefToggler);\r\n\r\n   /** @ngInject */\r\n   function superSidebarToggleMenu(superSidebarService) {\r\n       return {\r\n         restrict: 'A',\r\n         link: function(scope, elem){\r\n            elem.on('click',function($evt){\r\n              $evt.originalEvent.$sidebarEventProcessed = true;\r\n              scope.$apply(function() {\r\n                superSidebarService.toggleMenuCollapsed(); \r\n              });\r\n            });\r\n         }\r\n       }\r\n   }\r\n\r\n  /** @ngInject */\r\n  function baSidebarToggleMenu(superSidebarService) {\r\n    return {\r\n      restrict: 'A',\r\n      link: function(scope, elem) {\r\n        elem.on('click', function($evt) {\r\n          $evt.originalEvent.$sidebarEventProcessed = true;\r\n          scope.$apply(function() {\r\n            superSidebarService.toggleMenuCollapsed();\r\n          });\r\n        });\r\n      }\r\n    };\r\n  }\r\n\r\n  /** @ngInject */\r\n  function baSidebarCollapseMenu(superSidebarService) {\r\n    return {\r\n      restrict: 'A',\r\n      link: function(scope, elem) {\r\n        elem.on('click', function($evt) {\r\n          $evt.originalEvent.$sidebarEventProcessed = true;\r\n          if (!superSidebarService.isMenuCollapsed()) {\r\n            scope.$apply(function() {\r\n              superSidebarService.setMenuCollapsed(true);\r\n            });\r\n          }\r\n        });\r\n      }\r\n    };\r\n  }\r\n\r\n  /** @ngInject */\r\n  function baSidebarTogglingItem() {\r\n    return {\r\n      restrict: 'A',\r\n      controller: 'BaSidebarTogglingItemCtrl'\r\n    };\r\n  }\r\n\r\n  /** @ngInject */\r\n  function BaSidebarTogglingItemCtrl($scope, $element, $attrs, superSidebarService) {\r\n    var vm = this;\r\n    var menuItem = vm.$$menuItem = $scope.$eval($attrs.baSidebarTogglingItem);\r\n    if (menuItem && menuItem.subMenu && menuItem.subMenu.length) {\r\n      vm.$$expandSubmenu = function() { console.warn('$$expandMenu should be overwritten by baUiSrefTogglingSubmenu') };\r\n      vm.$$collapseSubmenu = function() { console.warn('$$collapseSubmenu should be overwritten by baUiSrefTogglingSubmenu') };\r\n\r\n      var subItemsStateRefs = superSidebarService.getAllStateRefsRecursive(menuItem);\r\n\r\n      vm.$expand = function() {\r\n        vm.$$expandSubmenu();\r\n        $element.addClass('ba-sidebar-item-expanded');\r\n      };\r\n\r\n      vm.$collapse = function() {\r\n        vm.$$collapseSubmenu();\r\n        $element.removeClass('ba-sidebar-item-expanded');\r\n      };\r\n\r\n      vm.$toggle = function() {\r\n        $element.hasClass('ba-sidebar-item-expanded') ?\r\n            vm.$collapse() :\r\n            vm.$expand();\r\n      };\r\n\r\n      if (superSidebarService.isCurrent) {\r\n        $element.addClass('ba-sidebar-item-expanded');\r\n      }\r\n\r\n      $scope.$on('$stateChangeStart', function (event, toState) {\r\n        if ($element.hasClass('ba-sidebar-item-expanded')) {\r\n          vm.$collapse();\r\n          $element.removeClass('ba-sidebar-item-expanded');\r\n        }\r\n      });\r\n\r\n      $scope.$on('$stateChangeSuccess', function (event, toState) {\r\n        if ( !$element.hasClass('ba-sidebar-item-expanded')) {\r\n          vm.$expand();\r\n          $element.addClass('ba-sidebar-item-expanded');\r\n        }\r\n      });\r\n    }\r\n\r\n    function _isState(state) {\r\n      return state && subItemsStateRefs.some(function(subItemState) {\r\n            return state.name.indexOf(subItemState) == 0;\r\n          });\r\n    }\r\n  }\r\n\r\n  /** @ngInject */\r\n  function baUiSrefTogglingSubmenu() {\r\n    return {\r\n      restrict: 'A',\r\n      require: '^baSidebarTogglingItem',\r\n      link: function(scope, el, attrs, baSidebarTogglingItem) {\r\n        baSidebarTogglingItem.$$expandSubmenu = function() { el.slideDown(); };\r\n        baSidebarTogglingItem.$$collapseSubmenu = function() { el.slideUp(); };\r\n      }\r\n    };\r\n  }\r\n\r\n  /** @ngInject */\r\n  function baUiSrefToggler(superSidebarService) {\r\n    return {\r\n      restrict: 'A',\r\n      require: '^baSidebarTogglingItem',\r\n      link: function(scope, el, attrs, baSidebarTogglingItem) {\r\n        el.on('click', function() {\r\n          if (superSidebarService.isMenuCollapsed()) {\r\n            // If the whole sidebar is collapsed and this item has submenu. We need to open sidebar.\r\n            // This should not affect mobiles, because on mobiles sidebar should be hidden at all\r\n            scope.$apply(function() {\r\n              superSidebarService.setMenuCollapsed(false);\r\n            });\r\n            baSidebarTogglingItem.$expand();\r\n          } else {\r\n            baSidebarTogglingItem.$toggle();\r\n          }\r\n        });\r\n      }\r\n    };\r\n  }\r\n\r\n})();\r\n"]}