{"version":3,"sources":["lib/ng-file-upload-shim.js"],"names":["patchXHR","fnName","newFn","window","XMLHttpRequest","prototype","redefineProp","xhr","prop","fn","Object","defineProperty","get","e","FileAPI","shouldLoad","FormData","forceLoad","initializeUploadListener","__listeners","upload","origAddEventListener","addEventListener","t","apply","arguments","orig","m","url","b","__url","message","indexOf","__origError","h","__fileApiXHR","getResponseHeader","getAllResponseHeaders","abort","header","value","val","Function","__requestHeaders","__isFileAPIShim","formData","config","jsonp","cache","complete","err","fileApiXHR","angular","isString","__completed","load","type","loaded","__loaded","total","__total","target","lengthComputable","loadend","status","undefined","statusText","response","resp","responseText","onreadystatechange","onload","progress","_this","setTimeout","noContentTimeout","headers","data","files","i","length","item","name","size","key","hasFlash","append","__isFileAPIBlobShim","push","Blob","isInputTypeFile","elem","tagName","toLowerCase","attr","fo","ActiveXObject","navigator","mimeTypes","getOffset","obj","left","top","jQuery","offset","offsetParent","offsetLeft","scrollLeft","offsetTop","scrollTop","html5","jsUrl","basePath","script","document","createElement","allScripts","getElementsByTagName","index","src","jsPath","search","substring","staticPath","setAttribute","appendChild","ngfFixIE","fileElem","changeFn","fixInputStyle","label","parent","removeClass","unbind","bind","evt","fileApiChangeFn","addClass","css","offsetWidth","offsetHeight","getFiles","__files_","disableFileInput","disable","FileReader","loadStarted","listeners","removeEventListener","splice","dispatchEvent","list","call","onabort","onerror","onloadstart","onloadend","onprogress","constructEvent","error","result","listener","readAsDataURL","file","readAsText"],"mappings":"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","file":"ng-file-upload-shim.js","sourcesContent":["/**!\r\n * AngularJS file upload directives and services. Supports: file upload/drop/paste, resume, cancel/abort,\r\n * progress, resize, thumbnail, preview, validation and CORS\r\n * FileAPI Flash shim for old browsers not supporting FormData\r\n * @author  Danial  <danial.farid@gmail.com>\r\n * @version 12.2.13\r\n */\r\n\r\n(function () {\r\n  /** @namespace FileAPI.noContentTimeout */\r\n\r\n  function patchXHR(fnName, newFn) {\r\n    window.XMLHttpRequest.prototype[fnName] = newFn(window.XMLHttpRequest.prototype[fnName]);\r\n  }\r\n\r\n  function redefineProp(xhr, prop, fn) {\r\n    try {\r\n      Object.defineProperty(xhr, prop, {get: fn});\r\n    } catch (e) {/*ignore*/\r\n    }\r\n  }\r\n\r\n  if (!window.FileAPI) {\r\n    window.FileAPI = {};\r\n  }\r\n\r\n  if (!window.XMLHttpRequest) {\r\n    throw 'AJAX is not supported. XMLHttpRequest is not defined.';\r\n  }\r\n\r\n  FileAPI.shouldLoad = !window.FormData || FileAPI.forceLoad;\r\n  if (FileAPI.shouldLoad) {\r\n    var initializeUploadListener = function (xhr) {\r\n      if (!xhr.__listeners) {\r\n        if (!xhr.upload) xhr.upload = {};\r\n        xhr.__listeners = [];\r\n        var origAddEventListener = xhr.upload.addEventListener;\r\n        xhr.upload.addEventListener = function (t, fn) {\r\n          xhr.__listeners[t] = fn;\r\n          if (origAddEventListener) origAddEventListener.apply(this, arguments);\r\n        };\r\n      }\r\n    };\r\n\r\n    patchXHR('open', function (orig) {\r\n      return function (m, url, b) {\r\n        initializeUploadListener(this);\r\n        this.__url = url;\r\n        try {\r\n          orig.apply(this, [m, url, b]);\r\n        } catch (e) {\r\n          if (e.message.indexOf('Access is denied') > -1) {\r\n            this.__origError = e;\r\n            orig.apply(this, [m, '_fix_for_ie_crossdomain__', b]);\r\n          }\r\n        }\r\n      };\r\n    });\r\n\r\n    patchXHR('getResponseHeader', function (orig) {\r\n      return function (h) {\r\n        return this.__fileApiXHR && this.__fileApiXHR.getResponseHeader ? this.__fileApiXHR.getResponseHeader(h) : (orig == null ? null : orig.apply(this, [h]));\r\n      };\r\n    });\r\n\r\n    patchXHR('getAllResponseHeaders', function (orig) {\r\n      return function () {\r\n        return this.__fileApiXHR && this.__fileApiXHR.getAllResponseHeaders ? this.__fileApiXHR.getAllResponseHeaders() : (orig == null ? null : orig.apply(this));\r\n      };\r\n    });\r\n\r\n    patchXHR('abort', function (orig) {\r\n      return function () {\r\n        return this.__fileApiXHR && this.__fileApiXHR.abort ? this.__fileApiXHR.abort() : (orig == null ? null : orig.apply(this));\r\n      };\r\n    });\r\n\r\n    patchXHR('setRequestHeader', function (orig) {\r\n      return function (header, value) {\r\n        if (header === '__setXHR_') {\r\n          initializeUploadListener(this);\r\n          var val = value(this);\r\n          // fix for angular < 1.2.0\r\n          if (val instanceof Function) {\r\n            val(this);\r\n          }\r\n        } else {\r\n          this.__requestHeaders = this.__requestHeaders || {};\r\n          this.__requestHeaders[header] = value;\r\n          orig.apply(this, arguments);\r\n        }\r\n      };\r\n    });\r\n\r\n    patchXHR('send', function (orig) {\r\n      return function () {\r\n        var xhr = this;\r\n        if (arguments[0] && arguments[0].__isFileAPIShim) {\r\n          var formData = arguments[0];\r\n          var config = {\r\n            url: xhr.__url,\r\n            jsonp: false, //removes the callback form param\r\n            cache: true, //removes the ?fileapiXXX in the url\r\n            complete: function (err, fileApiXHR) {\r\n              if (err && angular.isString(err) && err.indexOf('#2174') !== -1) {\r\n                // this error seems to be fine the file is being uploaded properly.\r\n                err = null;\r\n              }\r\n              xhr.__completed = true;\r\n              if (!err && xhr.__listeners.load)\r\n                xhr.__listeners.load({\r\n                  type: 'load',\r\n                  loaded: xhr.__loaded,\r\n                  total: xhr.__total,\r\n                  target: xhr,\r\n                  lengthComputable: true\r\n                });\r\n              if (!err && xhr.__listeners.loadend)\r\n                xhr.__listeners.loadend({\r\n                  type: 'loadend',\r\n                  loaded: xhr.__loaded,\r\n                  total: xhr.__total,\r\n                  target: xhr,\r\n                  lengthComputable: true\r\n                });\r\n              if (err === 'abort' && xhr.__listeners.abort)\r\n                xhr.__listeners.abort({\r\n                  type: 'abort',\r\n                  loaded: xhr.__loaded,\r\n                  total: xhr.__total,\r\n                  target: xhr,\r\n                  lengthComputable: true\r\n                });\r\n              if (fileApiXHR.status !== undefined) redefineProp(xhr, 'status', function () {\r\n                return (fileApiXHR.status === 0 && err && err !== 'abort') ? 500 : fileApiXHR.status;\r\n              });\r\n              if (fileApiXHR.statusText !== undefined) redefineProp(xhr, 'statusText', function () {\r\n                return fileApiXHR.statusText;\r\n              });\r\n              redefineProp(xhr, 'readyState', function () {\r\n                return 4;\r\n              });\r\n              if (fileApiXHR.response !== undefined) redefineProp(xhr, 'response', function () {\r\n                return fileApiXHR.response;\r\n              });\r\n              var resp = fileApiXHR.responseText || (err && fileApiXHR.status === 0 && err !== 'abort' ? err : undefined);\r\n              redefineProp(xhr, 'responseText', function () {\r\n                return resp;\r\n              });\r\n              redefineProp(xhr, 'response', function () {\r\n                return resp;\r\n              });\r\n              if (err) redefineProp(xhr, 'err', function () {\r\n                return err;\r\n              });\r\n              xhr.__fileApiXHR = fileApiXHR;\r\n              if (xhr.onreadystatechange) xhr.onreadystatechange();\r\n              if (xhr.onload) xhr.onload();\r\n            },\r\n            progress: function (e) {\r\n              e.target = xhr;\r\n              if (xhr.__listeners.progress) xhr.__listeners.progress(e);\r\n              xhr.__total = e.total;\r\n              xhr.__loaded = e.loaded;\r\n              if (e.total === e.loaded) {\r\n                // fix flash issue that doesn't call complete if there is no response text from the server\r\n                var _this = this;\r\n                setTimeout(function () {\r\n                  if (!xhr.__completed) {\r\n                    xhr.getAllResponseHeaders = function () {\r\n                    };\r\n                    _this.complete(null, {status: 204, statusText: 'No Content'});\r\n                  }\r\n                }, FileAPI.noContentTimeout || 10000);\r\n              }\r\n            },\r\n            headers: xhr.__requestHeaders\r\n          };\r\n          config.data = {};\r\n          config.files = {};\r\n          for (var i = 0; i < formData.data.length; i++) {\r\n            var item = formData.data[i];\r\n            if (item.val != null && item.val.name != null && item.val.size != null && item.val.type != null) {\r\n              config.files[item.key] = item.val;\r\n            } else {\r\n              config.data[item.key] = item.val;\r\n            }\r\n          }\r\n\r\n          setTimeout(function () {\r\n            if (!FileAPI.hasFlash) {\r\n              throw 'Adode Flash Player need to be installed. To check ahead use \"FileAPI.hasFlash\"';\r\n            }\r\n            xhr.__fileApiXHR = FileAPI.upload(config);\r\n          }, 1);\r\n        } else {\r\n          if (this.__origError) {\r\n            throw this.__origError;\r\n          }\r\n          orig.apply(xhr, arguments);\r\n        }\r\n      };\r\n    });\r\n    window.XMLHttpRequest.__isFileAPIShim = true;\r\n    window.FormData = FormData = function () {\r\n      return {\r\n        append: function (key, val, name) {\r\n          if (val.__isFileAPIBlobShim) {\r\n            val = val.data[0];\r\n          }\r\n          this.data.push({\r\n            key: key,\r\n            val: val,\r\n            name: name\r\n          });\r\n        },\r\n        data: [],\r\n        __isFileAPIShim: true\r\n      };\r\n    };\r\n\r\n    window.Blob = Blob = function (b) {\r\n      return {\r\n        data: b,\r\n        __isFileAPIBlobShim: true\r\n      };\r\n    };\r\n  }\r\n\r\n})();\r\n\r\n(function () {\r\n  /** @namespace FileAPI.forceLoad */\r\n  /** @namespace window.FileAPI.jsUrl */\r\n  /** @namespace window.FileAPI.jsPath */\r\n\r\n  function isInputTypeFile(elem) {\r\n    return elem[0].tagName.toLowerCase() === 'input' && elem.attr('type') && elem.attr('type').toLowerCase() === 'file';\r\n  }\r\n\r\n  function hasFlash() {\r\n    try {\r\n      var fo = new ActiveXObject('ShockwaveFlash.ShockwaveFlash');\r\n      if (fo) return true;\r\n    } catch (e) {\r\n      if (navigator.mimeTypes['application/x-shockwave-flash'] !== undefined) return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  function getOffset(obj) {\r\n    var left = 0, top = 0;\r\n\r\n    if (window.jQuery) {\r\n      return jQuery(obj).offset();\r\n    }\r\n\r\n    if (obj.offsetParent) {\r\n      do {\r\n        left += (obj.offsetLeft - obj.scrollLeft);\r\n        top += (obj.offsetTop - obj.scrollTop);\r\n        obj = obj.offsetParent;\r\n      } while (obj);\r\n    }\r\n    return {\r\n      left: left,\r\n      top: top\r\n    };\r\n  }\r\n\r\n  if (FileAPI.shouldLoad) {\r\n    FileAPI.hasFlash = hasFlash();\r\n\r\n    //load FileAPI\r\n    if (FileAPI.forceLoad) {\r\n      FileAPI.html5 = false;\r\n    }\r\n\r\n    if (!FileAPI.upload) {\r\n      var jsUrl, basePath, script = document.createElement('script'), allScripts = document.getElementsByTagName('script'), i, index, src;\r\n      if (window.FileAPI.jsUrl) {\r\n        jsUrl = window.FileAPI.jsUrl;\r\n      } else if (window.FileAPI.jsPath) {\r\n        basePath = window.FileAPI.jsPath;\r\n      } else {\r\n        for (i = 0; i < allScripts.length; i++) {\r\n          src = allScripts[i].src;\r\n          index = src.search(/\\/ng\\-file\\-upload[\\-a-zA-z0-9\\.]*\\.js/);\r\n          if (index > -1) {\r\n            basePath = src.substring(0, index + 1);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (FileAPI.staticPath == null) FileAPI.staticPath = basePath;\r\n      script.setAttribute('src', jsUrl || basePath + 'FileAPI.min.js');\r\n      document.getElementsByTagName('head')[0].appendChild(script);\r\n    }\r\n\r\n    FileAPI.ngfFixIE = function (elem, fileElem, changeFn) {\r\n      if (!hasFlash()) {\r\n        throw 'Adode Flash Player need to be installed. To check ahead use \"FileAPI.hasFlash\"';\r\n      }\r\n      var fixInputStyle = function () {\r\n        var label = fileElem.parent();\r\n        if (elem.attr('disabled')) {\r\n          if (label) label.removeClass('js-fileapi-wrapper');\r\n        } else {\r\n          if (!fileElem.attr('__ngf_flash_')) {\r\n            fileElem.unbind('change');\r\n            fileElem.unbind('click');\r\n            fileElem.bind('change', function (evt) {\r\n              fileApiChangeFn.apply(this, [evt]);\r\n              changeFn.apply(this, [evt]);\r\n            });\r\n            fileElem.attr('__ngf_flash_', 'true');\r\n          }\r\n          label.addClass('js-fileapi-wrapper');\r\n          if (!isInputTypeFile(elem)) {\r\n            label.css('position', 'absolute')\r\n              .css('top', getOffset(elem[0]).top + 'px').css('left', getOffset(elem[0]).left + 'px')\r\n              .css('width', elem[0].offsetWidth + 'px').css('height', elem[0].offsetHeight + 'px')\r\n              .css('filter', 'alpha(opacity=0)').css('display', elem.css('display'))\r\n              .css('overflow', 'hidden').css('z-index', '900000')\r\n              .css('visibility', 'visible');\r\n            fileElem.css('width', elem[0].offsetWidth + 'px').css('height', elem[0].offsetHeight + 'px')\r\n              .css('position', 'absolute').css('top', '0px').css('left', '0px');\r\n          }\r\n        }\r\n      };\r\n\r\n      elem.bind('mouseenter', fixInputStyle);\r\n\r\n      var fileApiChangeFn = function (evt) {\r\n        var files = FileAPI.getFiles(evt);\r\n        //just a double check for #233\r\n        for (var i = 0; i < files.length; i++) {\r\n          if (files[i].size === undefined) files[i].size = 0;\r\n          if (files[i].name === undefined) files[i].name = 'file';\r\n          if (files[i].type === undefined) files[i].type = 'undefined';\r\n        }\r\n        if (!evt.target) {\r\n          evt.target = {};\r\n        }\r\n        evt.target.files = files;\r\n        // if evt.target.files is not writable use helper field\r\n        if (evt.target.files !== files) {\r\n          evt.__files_ = files;\r\n        }\r\n        (evt.__files_ || evt.target.files).item = function (i) {\r\n          return (evt.__files_ || evt.target.files)[i] || null;\r\n        };\r\n      };\r\n    };\r\n\r\n    FileAPI.disableFileInput = function (elem, disable) {\r\n      if (disable) {\r\n        elem.removeClass('js-fileapi-wrapper');\r\n      } else {\r\n        elem.addClass('js-fileapi-wrapper');\r\n      }\r\n    };\r\n  }\r\n})();\r\n\r\nif (!window.FileReader) {\r\n  window.FileReader = function () {\r\n    var _this = this, loadStarted = false;\r\n    this.listeners = {};\r\n    this.addEventListener = function (type, fn) {\r\n      _this.listeners[type] = _this.listeners[type] || [];\r\n      _this.listeners[type].push(fn);\r\n    };\r\n    this.removeEventListener = function (type, fn) {\r\n      if (_this.listeners[type]) _this.listeners[type].splice(_this.listeners[type].indexOf(fn), 1);\r\n    };\r\n    this.dispatchEvent = function (evt) {\r\n      var list = _this.listeners[evt.type];\r\n      if (list) {\r\n        for (var i = 0; i < list.length; i++) {\r\n          list[i].call(_this, evt);\r\n        }\r\n      }\r\n    };\r\n    this.onabort = this.onerror = this.onload = this.onloadstart = this.onloadend = this.onprogress = null;\r\n\r\n    var constructEvent = function (type, evt) {\r\n      var e = {type: type, target: _this, loaded: evt.loaded, total: evt.total, error: evt.error};\r\n      if (evt.result != null) e.target.result = evt.result;\r\n      return e;\r\n    };\r\n    var listener = function (evt) {\r\n      if (!loadStarted) {\r\n        loadStarted = true;\r\n        if (_this.onloadstart) _this.onloadstart(constructEvent('loadstart', evt));\r\n      }\r\n      var e;\r\n      if (evt.type === 'load') {\r\n        if (_this.onloadend) _this.onloadend(constructEvent('loadend', evt));\r\n        e = constructEvent('load', evt);\r\n        if (_this.onload) _this.onload(e);\r\n        _this.dispatchEvent(e);\r\n      } else if (evt.type === 'progress') {\r\n        e = constructEvent('progress', evt);\r\n        if (_this.onprogress) _this.onprogress(e);\r\n        _this.dispatchEvent(e);\r\n      } else {\r\n        e = constructEvent('error', evt);\r\n        if (_this.onerror) _this.onerror(e);\r\n        _this.dispatchEvent(e);\r\n      }\r\n    };\r\n    this.readAsDataURL = function (file) {\r\n      FileAPI.readAsDataURL(file, listener);\r\n    };\r\n    this.readAsText = function (file) {\r\n      FileAPI.readAsText(file, listener);\r\n    };\r\n  };\r\n}\r\n"]}